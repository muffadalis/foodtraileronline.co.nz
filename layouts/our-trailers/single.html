{{ define "main" }}

<div class="mkdf-title-holder mkdf-standard-type mkdf-title-va-window-top mkdf-preload-background mkdf-has-bg-image mkdf-bg-parallax"
    style="height: 650px;background-color: #f5f5f5;background-image:url({{ .Params.banner_image | absURL  }});"
    data-height="650">
    <div class="mkdf-title-image">
        <img itemprop="image" src="{{ .Params.banner_image | absURL }}" />
    </div>
    <div class="mkdf-title-wrapper">
        <div class="mkdf-title-inner">
            <div class="mkdf-grid">
                <h6 class="mkdf-page-subtitle">Our Trailers</h6>
                <h1 class="mkdf-page-title entry-title" style="color: #ffffff">{{ .Title }}</h1>
            </div>
        </div>
    </div>
</div>


<div class="mkdf-container mkdf-default-page-template">

    <div class="mkdf-container-inner clearfix">
        <div class="mkdf-grid-row ">
            <div class="mkdf-page-content-holder mkdf-grid-col-12">
                <div class="mkdf-row-grid-section-wrapper ">
                    <div class="mkdf-row-grid-section">
                        <div class="vc_row wpb_row vc_row-fluid vc_custom_1620201573898 vc_row-has-fill">
                            <div class="wpb_column vc_column_container vc_col-sm-12">
                                <div class="vc_column-inner">
                                    <div class="wpb_wrapper">
                                        <div class="mkdf-row-grid-section-wrapper ">
                                            <div class="mkdf-row-grid-section">
                                                <div class="vc_row wpb_row vc_inner vc_row-fluid">
                                                    <div class="wpb_column vc_column_container vc_col-sm-2">
                                                        <div class="vc_column-inner">
                                                            <div class="wpb_wrapper"></div>
                                                        </div>
                                                    </div>
                                                    <div
                                                        class="wpb_column vc_column_container vc_col-sm-8">
                                                        <div class="vc_column-inner">
                                                            <div class="wpb_wrapper">
                                                                <div class="mkdf-section-title-holder  mkdf-st-split  mkdf-has-appear-animation">
                                                                    <div class="mkdf-st-inner">
                                                                        <span class="mkdf-st-tagline">
                                                                            Our Trailers </span>
                                                                        <h2 class="mkdf-st-title">
                                                                            <span class="mkdf-sts-title-text">{{ .Title }}</span>
                                                                            <span class="mkdf-sts-separator"></span>
                                                                        </h2>
                                                                    </div>
                                                                </div>
                                                                <div class="wpb_text_column wpb_content_element vc_custom_1622017566428">
                                                                    <div class="wpb_wrapper">
                                                                        {{ .Content }}
                                                                        {{ range .Params.sizes}}
                                                                        <h5 style="text-align: center;">{{.}}</h5>
                                                                        {{ end}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div
                                                        class="wpb_column vc_column_container vc_col-sm-2">
                                                        <div class="vc_column-inner">
                                                            <div class="wpb_wrapper"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mkdf-row-grid-section-wrapper ">
                    <div class="mkdf-row-grid-section">
                        <div class="vc_row wpb_row vc_row-fluid">
                            <div class="wpb_column vc_column_container vc_col-sm-12">
                                <div class="vc_column-inner vc_custom_1622018181007">
                                    <div class="wpb_wrapper">
                                        <div class="mkdf-pricing-tables mkdf-grid-list mkdf-disable-bottom-space clearfix mkdf-three-columns mkdf-normal-space">
                                            <div class="mkdf-pt-wrapper mkdf-outer-space">
                                                {{ with .Params.specs }}
                                                    {{ range . }}
                                                    <div class="mkdf-price-table mkdf-item-space">
                                                        <div class="mkdf-pt-inner">
                                                            <ul>
                                                                <li class="mkdf-pt-title-holder">
                                                                    <span class="mkdf-pt-tagline"></span>
                                                                    <span class="mkdf-pt-title">{{ .category }}</span>
                                                                </li>
                                                                <li class="mkdf-pt-content">
                                                                    <ul>
                                                                        {{ range .items }}
                                                                        <li> 
                                                                            <span class="mkdf-icon-shortcode mkdf-normal   ">
                                                                                <span class="mkdf-icon-font-elegant icon_check mkdf-icon-element"
                                                                                    style="color: #ed1d24"></span>
                                                                            </span>
                                                                            {{ . }}</li>
                                                                        {{ end}}
                                                                    </ul>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    {{ end }}
                                                {{ end}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mkdf-row-grid-section-wrapper">
                    <div class="mkdf-row-grid-section">
                        <div class="vc_row wpb_row vc_row-fluid">
                            <div class="wpb_column vc_column_container vc_col-sm-12">
                                <div class="vc_column-inner">
                                    <div class="wpb_wrapper">
                                        <!-- Thumbnail Grid -->
                                        <div class="gallery-grid mkdf-grid-list mkdf-three-columns">
                                            {{ range .Params.gallery }}
                                                <div class="gallery-thumb">
                                                    <img src="{{ . | relURL }}"
                                                        alt=""
                                                        width="800"
                                                        height="600"
                                                        loading="lazy"
                                                        class="gallery-open"
                                                        data-src="{{ . | relURL }}" />
                                                </div>
                                            {{ end }}
                                        </div>

                                        <!-- Swiper Lightbox -->
                                        <div class="swiper-lightbox">
                                            <div class="swiper">
                                                <div class="swiper-wrapper">
                                                    {{ range .Params.gallery }}
                                                        <div class="swiper-slide">
                                                            <div class="swiper-zoom-container">
                                                                <img src="{{ . | relURL }}" alt="" />
                                                            </div>
                                                        </div>
                                                    {{ end }}
                                                </div>
                                                <div class="swiper-button-prev"></div>
                                                <div class="swiper-button-next"></div>
                                                <div class="swiper-pagination"></div>
                                                <div class="swiper-lightbox-close">&times;</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize Swiper
        let lightboxSwiper = new Swiper('.swiper-lightbox .swiper', {
            zoom: true,
            loop: true,
            spaceBetween: 30,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
                hideOnClick: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            keyboard: {
                enabled: true,
                onlyInViewport: false,
            },
        });

        // Open lightbox
        const galleryThumbs = document.querySelectorAll('.gallery-thumb img');
        const lightbox = document.querySelector('.swiper-lightbox');

        galleryThumbs.forEach((thumb, index) => {
            thumb.addEventListener('click', () => {
                lightbox.style.display = 'block';
                // Reinitialize Swiper when opening lightbox
                lightboxSwiper.destroy(true, true);
                lightboxSwiper = new Swiper('.swiper-lightbox .swiper', {
                    zoom: true,
                    loop: true,
                    spaceBetween: 30,
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                        hideOnClick: false,
                    },
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    keyboard: {
                        enabled: true,
                        onlyInViewport: false,
                    },
                });
                lightboxSwiper.slideTo(index + 1, 0);
            });
        });

        // Close lightbox
        const closeBtn = document.querySelector('.swiper-lightbox-close');
        closeBtn.addEventListener('click', () => {
            lightbox.style.display = 'none';
            lightboxSwiper.destroy(true, true);
        });

        // Close on background click
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                lightbox.style.display = 'none';
                lightboxSwiper.destroy(true, true);
            }
        });

        // Close on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && lightbox.style.display === 'block') {
                lightbox.style.display = 'none';
                lightboxSwiper.destroy(true, true);
            }
        });
    });
</script>

<style>
    /* Gallery Grid */
    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
    }

    .gallery-thumb {
        cursor: pointer;
        overflow: hidden;
    }

    .gallery-thumb img {
        width: 100%;
        height: 300px;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .gallery-thumb:hover img {
        transform: scale(1.05);
    }

    /* Swiper Lightbox */
    .swiper-lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        z-index: 9999;
    }

    .swiper-lightbox .swiper {
        width: 100%;
        height: 100%;
    }

    .swiper-lightbox .swiper-slide {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .swiper-zoom-container {
        width: 90%;
        max-width: 1200px;
    }

    .swiper-zoom-container img {
        max-width: 100%;
        height: auto;
    }

    .swiper-lightbox-close {
        position: fixed;
        top: 20px;
        right: 20px;
        color: #fff;
        font-size: 40px;
        cursor: pointer;
        z-index: 10000;
    }

    @media (max-width: 768px) {
        .gallery-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
</style>

{{ end}}